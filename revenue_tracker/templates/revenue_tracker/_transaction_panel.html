<a name="{{ anchor }}"></a>
<div class="panel panel-{{ panel_type }}">

  <div class="panel-heading">
    <h1 class="panel-title"><a href='#summary'>{{ panel_title }}</a></h1>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th></th>
        <th>Date Ordered</th>
        <th>Date Fulfilled</th>
        <th>Customer</th>
        <th>Vendor</th>
        {% if transaction_type == 'all' %}
          <th>Transaction Type</th>
        {% endif %}
        <th>Size</th>
        <th>Quote</th>
        <th>Order</th>
        <th>Invoice</th>
        <th>Total Revenue</th>
        <th>Revenue / Sample</th>
        <th>IP-Related Revenue</th>
        <th>Royalties Owed</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for transaction in transaction_list %}
        <tr class="
          {% if transaction.transaction_type == 'kit' %}
            alert-success
          {% elif transaction.transaction_type == 'service' %}
            alert-info
          {% elif transaction.transaction_type == 'other' %}
            alert-warning
          {% endif %}
        ">
          <td>
            {% if transaction.customer.is_repeat_customer %}
              <small><i class="glyphicon glyphicon-repeat" data-toggle="tooltip" data-placement="top" title="{{ transaction.customer.tx_count }} Transactions"></i></small>
            {% endif %}
          </td>
          <td>{{ transaction.date }}</td>
          <td>{{ transaction.date_fulfilled|default:"-" }}</td>
          <td>
            {% if transaction.customer.website %}
              <a href="{{ transaction.customer.website }}" target="_blank">{{ transaction.customer }}</a>
            {% else %}
              {{ transaction.customer|default:"-" }}
            {% endif %}
          </td>
          <td>
            {% if transaction.vendor.website %}
              <a href="{{ transaction.vendor.website }}" target="_blank">{{ transaction.vendor }}</a>
            {% else %}
              {{ transaction.vendor|default:"-" }}
            {% endif %}
          </td>
          {% if transaction_type == 'all' %}
            <td>{{ transaction.get_transaction_type_display }}</td>
          {% endif %}
          <td>{{ transaction.number_of_reactions }} rxn{{ transaction.number_of_reactions|pluralize }}</td>
          <td>
            {% if transaction.quote %}
              <a href="{{ transaction.quote.pdf.url }}" target="_blank">
                {{ transaction.quote.number }}
              </a>
            {% else %}
              -
            {% endif %}
          </td>
          <td>
            {% if transaction.order %}
              <a href="{{ transaction.order.pdf.url }}" target="_blank">
                {{ transaction.order.number }}
              </a>
            {% else %}
              -
            {% endif %}
          </td>
          <td>
            {% if transaction.invoice %}
              <a href="{{ transaction.invoice.pdf.url }}" target="_blank">
                {{ transaction.invoice.number }}
              </a>
            {% else %}
              -
            {% endif %}
          </td>
          <td>{{ transaction.total_price }}</td>
          <td>{{ transaction.price_per_sample }}</td>
          <td>{{ transaction.ip_related_price }}</td>
          <td>{{ transaction.royalties_owed }}</td>
          <td>
            <a href="{% url 'revenue_tracker:transaction_detail' pk=transaction.pk %}"><i class="glyphicon glyphicon-info-sign"></i></a>
            <a href="{% url 'admin:revenue_tracker_transaction_change' transaction.pk %}" target="_blank"><i class="glyphicon glyphicon-pencil"></i></a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="#{{ anchor }}">
    <div class="panel-footer panel-{{ panel_type }}"></div>
  </a>

</div>
