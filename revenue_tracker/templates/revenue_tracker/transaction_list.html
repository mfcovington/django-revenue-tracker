{% extends "revenue_tracker/base.html" %}

{% block title %}
  Transactions | {{ block.super }}
{% endblock %}

{% block content %}

  <div class="container">

    <a name='summary'></a>
    <div class="jumbotron">
      <h1>Transactions</h1>
      <form method="get">
        <label for="from_date">From date: </label>
        <input id="from_date" type="text" name="from_date" value="{{ from_date }}">
        <label for="to_date">To date: </label>
        <input id="to_date" type="text" name="to_date" value="{{ to_date }}">
        <div class="btn-group">
          <input class="btn btn-primary" type="submit" value="Filter by Fulfillment Date">
          <button id="reset-filter" class="btn btn-danger" type="submit"><small><span class="glyphicon glyphicon-remove"></span></small></button>
        </div>
      </form>
      <br>
      <button class="btn btn-info" id="toggle-in-progress">Show Current Transactions</button>
    </div>

    <div id="in-progress" style="display: none;">
      {% include "revenue_tracker/_transaction_summary_panel.html" with panel_type="warning" full_report=report_including_unfulfilled anchor="completed-and-pending-transaction-summary" panel_title="Summary of Completed & Pending Transactions" %}
      {% include "revenue_tracker/_transaction_summary_panel.html" with panel_type="danger" full_report=report_unfulfilled anchor="pending-transaction-summary" panel_title="Summary of Pending Transactions" %}
      {% include "revenue_tracker/_transaction_panel.html" with panel_type="danger" transaction_list=unfulfilled_list transaction_type="all" anchor="pending-transactions" panel_title="Pending Transactions" %}
    </div>
    {% include "revenue_tracker/_transaction_summary_panel.html" with panel_type="info" full_report=report anchor="completed-transaction-summary" panel_title="Summary of Completed Transactions" %}
    {% include "revenue_tracker/_transaction_panel.html" with panel_type="primary" transaction_list=transaction_list transaction_type="all" anchor="completed-transactions" panel_title="Completed Transactions" %}

  </div>

{% endblock %}

{% block footer %}
  <script type="text/javascript">
    $(document).ready(function(){
      $('#toggle-in-progress').on('click', function(event) {
        $('#in-progress').toggle();
        var text = $('#toggle-in-progress').text();
        $('#toggle-in-progress').text(
          text == "Show Current Transactions" ? "Hide Current Transactions" : "Show Current Transactions");
      });
    });

  </script>
{% endblock footer %}
